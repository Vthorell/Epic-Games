<!DOCTYPE html>
<html lang="sv">
  <head>
    <title><%= title %></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/output.css' />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <style>

    </style>
  </head>
  <body>
    <header>
      <div>
        <h1>Administration</h1>
      </div>
    </header>
    <main>
      <div><!-- TODO: flex -->
        <div> <!-- TODO: sidebar -->
          <div>
            <h2>Ny Produkt</h2>
          </div>
        </div>
        <div>
          <a href="/admin/products/new">Ny produkt</a>
          <button id="loadProducts">Ladda produkter</button>
          <table>
            <thead>
              <tr>
                <th>Namn</th>
                <th>Rating</th>
                <th>Pris</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
      </div>
    </main>
    <footer>
      
    </footer>
    <script>
      const knapp = document.getElementById('loadProducts');

      
      knapp.addEventListener('click', function() {


        const tbody = document.querySelector("tbody");

      
        // t.ex. GET.

          // Fetch products from the backend API
          fetch('/api/products')
            .then(response => response.json())
            .then(data => {
             
              const tableBody = document.querySelector('table tbody');

             
              data.forEach(product => {
                const row = document.createElement('tr');

                
                const nameCell = document.createElement('td');
                nameCell.textContent = product.productName;

                const ratingCell = document.createElement('td');
                ratingCell.textContent = product.rating;

                const priceCell = document.createElement('td');
                priceCell.textContent = product.price;

               
                row.appendChild(nameCell);
                row.appendChild(ratingCell);
                row.appendChild(priceCell);

               
                tableBody.appendChild(row);
              });
            })

        console.log("gör något annat som inte har med fordonen att göra");
      });
    </script>
  </body>
</html>
